<app-title title="Shipping Details" fontSize="1.6rem"></app-title>
<div class="d-flex p-3 flex-column flex-md-row align-items-center">
  <div>
    <form class="row g-2 p-4" [formGroup]="form">
      <div class="col-sm-6">
        <label for="name" class="form-label">name</label>
        <input
          type="name"
          class="form-control"
          id="name"
          formControlName="name"
        />
        <div *ngIf="name && name.touched" class="text-danger">
          <span *ngIf="name.errors?.['required'] ">Enter name</span>
          <span *ngIf="name?.errors?.['minlength'] "
            >name length should be min 3 letter</span
          >
        </div>
      </div>
      <div class="col-sm-6">
        <label for="phone" class="form-label">phone</label>
        <input
          type="phone"
          class="form-control"
          maxlength="10"
          id="phone"
          formControlName="phone"
        />
        <div *ngIf="phone && phone.touched" class="text-danger">
          <span *ngIf="phone.errors?.['required'] ">Enter phone number</span>
          <span
            *ngIf="phone?.errors?.['minlength'] || phone?.errors?.['pattern'] "
            >Enter valid phone number</span
          >
        </div>
      </div>
      <div class="col-sm-6">
        <label for="house" class="form-label">House</label>
        <input
          type="text"
          class="form-control"
          id="house"
          placeholder="1234 Main St"
          formControlName="house"
        />
        <div *ngIf="house && house.touched" class="text-danger">
          <span *ngIf="house.errors?.['required'] ">Enter house number</span>
          <span *ngIf="house?.errors?.['minlength'] "
            >Enter valid house number</span
          >
        </div>
      </div>
      <div class="col-sm-6">
        <label for="address" class="form-label">Address</label>
        <input
          type="text"
          class="form-control"
          id="address"
          placeholder="Near new building , main road"
          formControlName="street"
        />
        <div *ngIf="street && street.touched" class="text-danger">
          <span *ngIf="street.errors?.['required'] ">Enter Address</span>
          <span *ngIf="street?.errors?.['minlength'] "
            >Enter minimum 6 character</span
          >
        </div>
      </div>
      <div class="col-sm-6">
        <label for="city" class="form-label">City</label>
        <input
          type="text"
          class="form-control"
          id="city"
          formControlName="city"
        />
        <div *ngIf="city && city.touched" class="text-danger">
          <span *ngIf="city.errors?.['required'] ">Enter city</span>
          <span *ngIf="city?.errors?.['minlength'] ">Enter valid city</span>
        </div>
      </div>
      <div class="col-sm-6">
        <label for="state" class="form-label">State</label>
        <select id="state" class="form-select" formControlName="state">
          <option value=""></option>
          <option *ngFor="let state of states" value="{{ state }}">
            {{ state }}
          </option>
        </select>
        <div *ngIf="state && state.touched" class="text-danger">
          <span *ngIf="state.errors?.['required'] ">Enter state</span>
          <span *ngIf="state?.errors?.['minlength'] ">Enter valid state</span>
        </div>
      </div>
      <div class="col-sm-6">
        <label for="pincode" class="form-label">Pincode</label>
        <input
          type="text"
          class="form-control"
          id="pincode"
          maxlength="6"
          formControlName="pincode"
        />
        <div *ngIf="pincode && pincode.touched" class="text-danger">
          <span *ngIf="pincode.errors?.['required'] ">Enter pincode</span>
          <span
            *ngIf="pincode?.errors?.['minlength'] || pincode?.errors?.['pattern'] "
            >Enter valid pincode
          </span>
        </div>
      </div>
    </form>
  </div>
  <div
    style="
      min-width: 20rem;
      max-width: 28rem;
      padding: 5px;
      margin: 5px;
      border: 1px solid rgb(206, 208, 209);
      text-align: center;
    "
  >
    <h2>Cart Summery</h2>
    <div class="d-flex flex-column mb-3 m-2">
      <div>
        <span>Subtotal :-</span>
        <span>{{ cartDetails.totalPrice }}</span>
      </div>
      <div>
        <span>Total Items :</span>
        <span>{{ cartDetails.totalItems }}</span>
      </div>
      <div>
        <span>Shipping charges :</span>
        <span>0</span>
      </div>
      <hr />
      <div class="mb-2">
        <span>Total :</span>
        <span>{{ cartDetails.totalPrice }}</span>
      </div>
      <app-stripe [order]="cartDetails" [status]="form"  [form]="form.value"  ></app-stripe>
    </div>
  </div>
</div>
